<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Objects managers | DryWetMIDI </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Objects managers | DryWetMIDI ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="a_managers">
<h1 id="objects-managers">Objects managers</h1>

<p>Working with low-level objects (like MIDI event) sometimes is not convenient. In this cases it's much more handy to manage MIDI data via concepts of <a class="xref" href="../../api/Melanchall.DryWetMidi.Interaction.TimedEvent.html">timed events</a>, <a class="xref" href="../../api/Melanchall.DryWetMidi.Interaction.Note.html">notes</a> or <a class="xref" href="../../api/Melanchall.DryWetMidi.Interaction.Chord.html">chords</a>.</p>
<p>DryWetMIDI provides a way to work with such high-level objects - <a class="xref" href="../../api/Melanchall.DryWetMidi.Interaction.TimedObjectsManager.html">TimedObjectsManager</a>. This class allows to work with objects of different types within an events collection (see <a class="xref" href="../../api/Melanchall.DryWetMidi.Core.TrackChunk.html#Melanchall_DryWetMidi_Core_TrackChunk_Events">TrackChunk.Events</a>):</p>
<pre><code class="lang-csharp">using (var manager = new TimedObjectsManager(trackChunk.Events, ObjectType.Note | ObjectType.TimedEvent))
{
    foreach (var obj in manager.Objects)
    {
        if (obj is Note note)
            note.Length -= 10;
        else if (obj is TimedEvent timedEvent &amp;&amp; timedEvent.Event is BaseTextEvent textEvent)
            textEvent.Text = &quot;Hello&quot;;
    }

    manager.Objects.RemoveAll(obj =&gt; obj is Note note &amp;&amp; note.Channel == 9);

    manager.Objects.Add(new TimedEvent(new ProgramChangeEvent((SevenBitNumber)7), 100));
}
</code></pre>
<p>All changes made with a manager will not be saved until <code>SaveChanges</code> or <code>Dispose</code> method will be called. So the recommended practice to work with managers is</p>
<pre><code class="lang-csharp">using (var notesManager = trackChunk.ManageNotes())
{
    // ...
}
</code></pre>
<p>or if managing is happen in different parts of  a program</p>
<pre><code class="lang-csharp">var notesManager = new TimedObjectsManager&lt;Note&gt;(trackChunk.Events);
// ...
notesManager.SaveChanges();
</code></pre>
<p>Objects will be placed in the underlying events collection in chronological order of course. Also as you can see there is the generic constructor that allows to manage objects of the single type. <code>Objects</code> property will return in this case objects of this type, no need to cast them to the type.</p>
<h2 id="simultaneous-editing-of-events-collection">Simultaneous editing of events collection</h2>
<p>On saving the manager will rewrite all content of the underlying events collection. So you shouldn't modify the collection while working with the manager since all unsaved changes will be lost on manager's <code>SaveChanges</code> or <code>Dispose</code>.</p>
<p>For example, this code</p>
<pre><code class="lang-csharp">using (var timedEventsManager = new TimedObjectsManager&lt;TimedEvent&gt;(trackChunk.Events))
using (var notesManager = new TimedObjectsManager&lt;Note&gt;(trackChunk.Events))
{
    // All changes made with the notesManager will be lost
}
</code></pre>
<p>or</p>
<pre><code class="lang-csharp">var timedEventsManager = new TimedObjectsManager&lt;TimedEvent&gt;(trackChunk.Events);

var notesManager = new TimedObjectsManager&lt;Note&gt;(trackChunk.Events);

// All changes made with the notesManager will be lost

timedEventsManager.SaveChanges();
</code></pre>
<p>will cause changes made with the <code>notesManager</code> will be lost because <code>SaveChanges</code> (or <code>Dispose</code> in first code snippet) of <code>timedEventsManager</code> executed after <code>SaveChanges</code> of <code>notesManager</code>, and thus rewrites underlying events collection. You need to save changes made with a previous manager before managing objects with next one.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            2022 / Generated by <a href="https://dotnet.github.io/docfx">DocFX</a>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
